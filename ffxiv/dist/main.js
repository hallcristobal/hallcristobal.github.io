!function(t){var e={};function i(a){if(e[a])return e[a].exports;var l=e[a]={i:a,l:!1,exports:{}};return t[a].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)i.d(a,l,function(e){return t[e]}.bind(null,l));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=React},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=i(0),l=i(2),n=i(3);l.render(a.createElement("div",null,a.createElement(n.default,null)),document.getElementById("content"))},function(t,e){t.exports=ReactDOM},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=i(0),l={1:{ability:"Reprisal",reduction:.1,shields:null},2:{ability:"Rampart",reduction:.2,shields:null},3:{ability:"Sentinel",reduction:.3,shields:null},4:{ability:"Intervention",reduction:.1,shields:null},5:{ability:"Intervention w/ Rampart",reduction:.2,shields:null},6:{ability:"Intervention w/ Sentinel",reduction:.25,shields:null},7:{ability:"Intervention w/ Rampart & Sentinel",reduction:.35,shields:null},8:{ability:"Divine Veil",reduction:null,shields:{target:"self",amount:.1}},9:{ability:"Passage of Arms",reduction:.15,shields:null},10:{ability:"Vengence",reduction:.3,shields:null},11:{ability:"Nascent Flash",reduction:.1,shields:null},12:{ability:"Shake It Off",reduction:null,shields:{target:"ally",amount:.12}},13:{ability:"Shaddow Wall",reduction:.3,shields:null},14:{ability:"The Blackest Night",reduction:null,shields:{target:"ally",amount:.25}},15:{ability:"Dark Missionary",reduction:.1,shields:null},16:{ability:"Nebula",reduction:.3,shields:null},17:{ability:"Heart of Stone",reduction:.15,shields:null},18:{ability:"Heart of Light",reduction:.1,shields:null},20:{ability:"Fey Illumination",reduction:.05,shields:null},21:{ability:"Sacred Soil",reduction:.1,shields:null},19:{ability:"Collective Unconsious",reduction:.1,shields:null},22:{ability:"Feint",reduction:.1,shields:null},23:{ability:"Troubadour",reduction:.1,shields:null},25:{ability:"Tactician (Gun Samba)",reduction:.1,shields:null},24:{ability:"Shield Samba",reduction:.1,shields:null},26:{ability:"Addle",reduction:.1,shields:null},27:{ability:"Dark Mind",reduction:.2,shields:null}},n={PLD:{sort:1,mitigations:[1,2,3,4,5,6,7,8,9]},WAR:{sort:2,mitigations:[1,2,10,11,12]},DRK:{sort:3,mitigations:[1,2,13,14,15,27]},GNB:{sort:4,mitigations:[1,2,16,17,18]},WHM:{sort:5,mitigations:[]},SCH:{sort:6,mitigations:[20,21]},AST:{sort:7,mitigations:[19]},MNK:{sort:8,mitigations:[22]},DRG:{sort:9,mitigations:[22]},NIN:{sort:10,mitigations:[22]},SAM:{sort:11,mitigations:[22]},BRD:{sort:12,mitigations:[23]},MCH:{sort:13,mitigations:[25]},DNC:{sort:14,mitigations:[24]},BLM:{sort:15,mitigations:[26]},SMN:{sort:16,mitigations:[26]},RDM:{sort:17,mitigations:[26]}};var s=!1;class o extends a.Component{constructor({}){super({}),this.updateMitigations=()=>{let t=[];this.state.activeJobs.forEach(e=>{for(const i of n[e].mitigations)-1==t.indexOf(i)&&t.push(i)});let e=this.state.availableMitigations;for(const i of Object.keys(this.state.availableMitigations)){const a=parseInt(i);-1===t.indexOf(a)&&delete e[a]}for(const i of t)void 0===e[i]&&(e[i]={active:!1,def:l[i]});console.log("upmit",e),this.setState({availableMitigations:e},this.applyMitigations)},this.applyMitigations=()=>{var t=this.state.baseDamage,e=""+this.state.baseDamage;Object.keys(this.state.availableMitigations).map(t=>parseInt(t)).forEach(i=>{console.log("apmit",i,this.state.availableMitigations[i]);const a=this.state.availableMitigations[i];a.active&&null!==a.def.reduction&&(t*=1-a.def.reduction,e+=" * "+a.def.reduction)}),this.setState({adjustedDamage:t,mitigationMathString:e})},this.onDamageUpdate=t=>{isNaN(Number(t.target.value))?(console.log("bad number",t.target.value),s=!0):(this.setState({badNumber:!1,baseDamage:Number(t.target.value)},this.applyMitigations),console.log("number",Number(t.target.value)),s=!1)},this.onHealthUpdate=t=>{isNaN(Number(t.target.value))?console.log("bad number",t.target.value):(this.setState({maxHp:Number(t.target.value)}),console.log("number",Number(t.target.value)))},this.setActiveMitigation=(t,e)=>{var i=this.state.availableMitigations;i[e].active=t.target.checked,this.setState({availableMitigations:i},this.applyMitigations)},this.setActiveJob=(t,e)=>{console.log(t,e);const i=t.target.checked,a=this.state.activeJobs,l=this.state.activeJobs.indexOf(e);-1==l&&i?(a.push(e),this.setState({activeJobs:a},this.updateMitigations)):l>-1&&!i&&(a.splice(l,1),this.setState({activeJobs:a},this.updateMitigations))},this.state={badNumber:!1,baseDamage:0,maxHp:0,adjustedDamage:0,mitigationMathString:"",adjustedHp:0,activeJobs:[],availableMitigations:{}}}render(){const t=Object.keys(n).map(t=>a.createElement("div",{key:t},a.createElement("span",null,a.createElement("input",{type:"checkbox",onChange:e=>this.setActiveJob(e,t)})),a.createElement("span",null," ",t))),e=this.state.activeJobs.sort((t,e)=>n[t].sort-n[e].sort).join(", "),i=Object.keys(this.state.availableMitigations).map(t=>{const e=parseInt(t);return a.createElement("tr",null,a.createElement("td",null,a.createElement("input",{checked:this.state.availableMitigations[e].active,type:"checkbox",onChange:t=>this.setActiveMitigation(t,e)})),a.createElement("td",null,a.createElement("span",null," ",this.state.availableMitigations[e].def.ability)))});return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-3"},a.createElement("h5",null,"Party Makeup"),t),a.createElement("div",{className:"col-md"},a.createElement("div",null,s?a.createElement("div",{style:{color:"red",fontSize:"0.9em"}},"Invalid Damage Number"):null,a.createElement("label",{htmlFor:"damageInput"},"Base Damage: "),a.createElement("br",null),a.createElement("input",{id:"damageInput",style:{color:s?"red":"black"},type:"text",onBlur:this.onDamageUpdate})),a.createElement("div",null,this.state.badNumber?a.createElement("div",{style:{color:"red",fontSize:"0.9em"}},"Invalid Damage Number"):null,a.createElement("label",{htmlFor:"damageInput"},"Starting Health: "),a.createElement("br",null),a.createElement("input",{id:"health Input",style:{color:this.state.badNumber?"red":"black"},type:"text",onBlur:this.onHealthUpdate})),a.createElement("div",null,a.createElement("span",null,"Active Jobs: ",e),a.createElement("div",null,"Available Mitigations:",a.createElement("table",null,a.createElement("tbody",null,i)))),a.createElement("br",null),a.createElement("div",null,a.createElement("span",null,"Math String: ",this.state.mitigationMathString)),a.createElement("br",null),a.createElement("div",null,a.createElement("span",null,"Adjusted Damage: ",Math.ceil(this.state.adjustedDamage)))))}}e.default=o}]);
//# sourceMappingURL=main.js.map