{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./src/index.tsx","webpack:///external \"ReactDOM\"","webpack:///./src/components/Calculator.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","ReactDOM","render","document","getElementById","RoleMitigations","1","ability","reduction","shields","2","3","4","5","6","7","8","target","amount","9","10","11","12","13","14","15","16","17","18","20","21","19","22","23","25","24","26","27","Jobs","sort","mitigations","invalidDamage","Calculator","Component","super","updateMitigations","this","state","activeJobs","forEach","job","id","indexOf","push","actMitigations","availableMitigations","_key","keys","parseInt","undefined","active","def","console","log","setState","applyMitigations","adjusted","baseDamage","mathString","map","mit","adjustedDamage","mitigationMathString","onDamageUpdate","event","isNaN","Number","badNumber","onHealthUpdate","maxHp","setActiveMitigation","e","checked","setActiveJob","jobs","idx","splice","adjustedHp","jobList","type","onChange","a","b","join","className","style","color","fontSize","htmlFor","onBlur","Math","ceil"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,gBClFrDhC,EAAOD,QAAUkC,O,8ECAjB,aACA,OAEA,OAEAC,EAASC,OACL,2BACI,gBAAC,UAAU,OAEfC,SAASC,eAAe,a,cCT5BrC,EAAOD,QAAUmC,U,8ECAjB,aAyBMI,EAAkD,CACpDC,EAAI,CAAEC,QAAS,WAAsCC,UAAW,GAAMC,QAAS,MAC/EC,EAAI,CAAEH,QAAS,UAAsCC,UAAW,GAAMC,QAAS,MAC/EE,EAAI,CAAEJ,QAAS,WAAsCC,UAAW,GAAMC,QAAS,MAC/EG,EAAI,CAAEL,QAAS,eAAsCC,UAAW,GAAMC,QAAS,MAC/EI,EAAI,CAAEN,QAAS,0BAAsCC,UAAW,GAAMC,QAAS,MAC/EK,EAAI,CAAEP,QAAS,2BAAsCC,UAAW,IAAMC,QAAS,MAC/EM,EAAI,CAAER,QAAS,qCAAsCC,UAAW,IAAMC,QAAS,MAC/EO,EAAI,CAAET,QAAS,cAAsCC,UAAW,KAAMC,QAAS,CAAEQ,OAAQ,OAAQC,OAAQ,KACzGC,EAAI,CAAEZ,QAAS,kBAAsCC,UAAW,IAAMC,QAAS,MAC/EW,GAAI,CAAEb,QAAS,WAAsCC,UAAW,GAAMC,QAAS,MAC/EY,GAAI,CAAEd,QAAS,gBAAsCC,UAAW,GAAMC,QAAS,MAC/Ea,GAAI,CAAEf,QAAS,eAAsCC,UAAW,KAAMC,QAAS,CAAEQ,OAAQ,OAAQC,OAAQ,MACzGK,GAAI,CAAEhB,QAAS,eAAsCC,UAAW,GAAMC,QAAS,MAC/Ee,GAAI,CAAEjB,QAAS,qBAAsCC,UAAW,KAAMC,QAAS,CAAEQ,OAAQ,OAAQC,OAAQ,MACzGO,GAAI,CAAElB,QAAS,kBAAsCC,UAAW,GAAMC,QAAS,MAC/EiB,GAAI,CAAEnB,QAAS,SAAsCC,UAAW,GAAMC,QAAS,MAC/EkB,GAAI,CAAEpB,QAAS,iBAAsCC,UAAW,IAAMC,QAAS,MAC/EmB,GAAI,CAAErB,QAAS,iBAAsCC,UAAW,GAAMC,QAAS,MAC/EoB,GAAI,CAAEtB,QAAS,mBAAsCC,UAAW,IAAMC,QAAS,MAC/EqB,GAAI,CAAEvB,QAAS,cAAsCC,UAAW,GAAMC,QAAS,MAC/EsB,GAAI,CAAExB,QAAS,wBAAsCC,UAAW,GAAMC,QAAS,MAC/EuB,GAAI,CAAEzB,QAAS,QAAsCC,UAAW,GAAMC,QAAS,MAC/EwB,GAAI,CAAE1B,QAAS,aAAsCC,UAAW,GAAMC,QAAS,MAC/EyB,GAAI,CAAE3B,QAAS,wBAAsCC,UAAW,GAAMC,QAAS,MAC/E0B,GAAI,CAAE5B,QAAS,eAAsCC,UAAW,GAAMC,QAAS,MAC/E2B,GAAI,CAAE7B,QAAS,QAAsCC,UAAW,GAAMC,QAAS,MAC/E4B,GAAI,CAAE9B,QAAS,YAAsCC,UAAW,GAAMC,QAAS,OAG7E6B,EAA2C,CAC7C,IAAO,CAAEC,KAAM,EAAGC,YAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IACxD,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,EAAG,EAAG,GAAI,GAAI,KAC9C,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,KAClD,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,EAAG,EAAG,GAAI,GAAI,KAC9C,IAAO,CAAED,KAAM,EAAGC,YAAa,IAC/B,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,GAAI,KACpC,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,KAChC,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,KAChC,IAAO,CAAED,KAAM,EAAGC,YAAa,CAAC,KAChC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,KACjC,IAAO,CAAED,KAAM,GAAIC,YAAa,CAAC,MAiCrC,IAAIC,GAAgB,EAEpB,MAAqBC,UAAmB1C,EAAM2C,UAC1C,gBACIC,MAAM,IAcV,KAAAC,kBAAoB,KAChB,IAAIL,EAAwB,GAE5BM,KAAKC,MAAMC,WAAWC,QAAQC,IAC1B,IAAK,MAAMC,KAAMb,EAAKY,GAAKV,aACS,GAA5BA,EAAYY,QAAQD,IACpBX,EAAYa,KAAKF,KAK7B,IAAIG,EAAiBR,KAAKC,MAAMQ,qBAChC,IAAK,MAAMC,KAAQ9E,OAAO+E,KAAKX,KAAKC,MAAMQ,sBAAuB,CAC7D,MAAMhE,EAAMmE,SAASF,IACa,IAA9BhB,EAAYY,QAAQ7D,WACb+D,EAAe/D,GAI9B,IAAK,MAAMA,KAAOiD,OACcmB,IAAxBL,EAAe/D,KACf+D,EAAe/D,GAAQ,CAAEqE,QAAQ,EAAOC,IAAKxD,EAAgBd,KAGrEuE,QAAQC,IAAI,QAAST,GAErBR,KAAKkB,SAAS,CACVT,qBAAsBD,GACvBR,KAAKmB,mBAGZ,KAAAA,iBAAmB,KACf,IAAIC,EAAWpB,KAAKC,MAAMoB,WACtBC,EAAa,GAAKtB,KAAKC,MAAMoB,WAEjCzF,OAAO+E,KAAKX,KAAKC,MAAMQ,sBAAsBc,IAAI9E,GAAOmE,SAASnE,IAAM0D,QAAQ1D,IAC3EuE,QAAQC,IAAI,QAASxE,EAAKuD,KAAKC,MAAMQ,qBAAqBhE,IAC1D,MAAM+E,EAAMxB,KAAKC,MAAMQ,qBAAqBhE,GACxC+E,EAAIV,QAAgC,OAAtBU,EAAIT,IAAIrD,YACtB0D,GAAuB,EAAII,EAAIT,IAAIrD,UACnC4D,GAAc,MAAQE,EAAIT,IAAIrD,aAItCsC,KAAKkB,SAAS,CACVO,eAAgBL,EAChBM,qBAAsBJ,KAI9B,KAAAK,eAAkBC,IACTC,MAAMC,OAAOF,EAAMzD,OAAOhC,SAQ3B6E,QAAQC,IAAI,aAAcW,EAAMzD,OAAOhC,OACvCwD,GAAgB,IARhBK,KAAKkB,SAAS,CACVa,WAAW,EACXV,WAAYS,OAAOF,EAAMzD,OAAOhC,QACjC6D,KAAKmB,kBACRH,QAAQC,IAAI,SAAUa,OAAOF,EAAMzD,OAAOhC,QAC1CwD,GAAgB,IAOxB,KAAAqC,eAAkBJ,IACTC,MAAMC,OAAOF,EAAMzD,OAAOhC,QAM3B6E,QAAQC,IAAI,aAAcW,EAAMzD,OAAOhC,QALvC6D,KAAKkB,SAAS,CACVe,MAAOH,OAAOF,EAAMzD,OAAOhC,SAE/B6E,QAAQC,IAAI,SAAUa,OAAOF,EAAMzD,OAAOhC,UAMlD,KAAA+F,oBAAsB,CAACC,EAAwC1F,KAC3D,IAAI2E,EAAWpB,KAAKC,MAAMQ,qBAC1BW,EAAS3E,GAAKqE,OAASqB,EAAEhE,OAAOiE,QAChCpC,KAAKkB,SAAS,CACVT,qBAAsBW,GACvBpB,KAAKmB,mBAGZ,KAAAkB,aAAe,CAACT,EAA4CxB,KACxDY,QAAQC,IAAIW,EAAOxB,GAEnB,MAAMgC,EAAUR,EAAMzD,OAAOiE,QACvBE,EAAOtC,KAAKC,MAAMC,WAClBqC,EAAMvC,KAAKC,MAAMC,WAAWI,QAAQF,IAC9B,GAARmC,GAAaH,GACbE,EAAK/B,KAAKH,GACVJ,KAAKkB,SAAS,CACVhB,WAAYoC,GACbtC,KAAKD,oBACDwC,GAAO,IAAMH,IACpBE,EAAKE,OAAOD,EAAK,GACjBvC,KAAKkB,SAAS,CACVhB,WAAYoC,GACbtC,KAAKD,qBA9GZC,KAAKC,MAAQ,CACT8B,WAAW,EACXV,WAAY,EACZY,MAAO,EACPR,eAAgB,EAChBC,qBAAsB,GACtBe,WAAY,EACZvC,WAAY,GACZO,qBAAsB,IA0G9B,SACI,MAAMiC,EAAU9G,OAAO+E,KAAKnB,GAAM+B,IAAInB,GAE9B,uBAAK3D,IAAK2D,GACN,4BAAM,yBAAOuC,KAAK,WAAWC,SAAWT,GAAMnC,KAAKqC,aAAaF,EAAG/B,MACnE,4B,IAAQA,KAKdF,EAAaF,KAAKC,MAAMC,WAAWT,KAAK,CAACoD,EAAGC,IAAMtD,EAAKqD,GAAGpD,KAAOD,EAAKsD,GAAGrD,MAAMsD,KAAK,MACpFtC,EAAuB7E,OAAO+E,KAAKX,KAAKC,MAAMQ,sBAAsBc,IAAIb,IAC1E,MAAMjE,EAAMmE,SAASF,GACrB,OACI,0BACI,0BAAI,yBACA0B,QAASpC,KAAKC,MAAMQ,qBAAqBhE,GAAKqE,OAC9C6B,KAAK,WACLC,SAAWT,GAAMnC,KAAKkC,oBAAoBC,EAAG1F,MAEjD,0BAAI,4B,IAAQuD,KAAKC,MAAMQ,qBAAqBhE,GAAKsE,IAAItD,aAKjE,OACI,uBAAKuF,UAAU,OACX,uBAAKA,UAAU,YACX,0CACCN,GAEL,uBAAKM,UAAU,UACX,2BACKrD,EAAiB,uBAAKsD,MAAO,CAAEC,MAAO,MAAOC,SAAU,UAAS,yBAAiC,KAClG,yBAAOC,QAAQ,eAAa,iBAC5B,2BACA,yBACI/C,GAAG,cACH4C,MAAO,CAAEC,MAAOvD,EAAgB,MAAQ,SACxCgD,KAAK,OACLU,OAAQrD,KAAK2B,kBAErB,2BACK3B,KAAKC,MAAM8B,UAAa,uBAAKkB,MAAO,CAAEC,MAAO,MAAOC,SAAU,UAAS,yBAAiC,KACzG,yBAAOC,QAAQ,eAAa,qBAC5B,2BACA,yBACI/C,GAAG,eACH4C,MAAO,CAAEC,MAAOlD,KAAKC,MAAM8B,UAAY,MAAQ,SAC/CY,KAAK,OACLU,OAAQrD,KAAKgC,kBAErB,2BACI,4B,gBAAoB9B,GACpB,2B,yBAEI,6BACI,6BACKO,MAKjB,2BACA,2BACI,4B,gBAAoBT,KAAKC,MAAMyB,uBAEnC,2BACA,2BACI,4B,oBAAwB4B,KAAKC,KAAKvD,KAAKC,MAAMwB,qBA3LrE","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = React;","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport Calculator from \"./components/Calculator\";\r\n\r\nReactDOM.render(\r\n    <div>\r\n        <Calculator />\r\n    </div>,\r\n    document.getElementById(\"content\")\r\n);","module.exports = ReactDOM;","import * as React from \"react\";\r\nimport { number } from \"prop-types\";\r\n\r\ninterface ICalculatorState {\r\n    badNumber: boolean;\r\n    baseDamage: number;\r\n    maxHp: number;\r\n    adjustedDamage: number;\r\n    mitigationMathString: string;\r\n    adjustedHp: number;\r\n    activeJobs: string[];\r\n    availableMitigations: { [key: number]: { active: boolean, def: IMitigation } };\r\n};\r\n\r\ninterface IMitigation {\r\n    ability: string;\r\n    reduction: number | null;\r\n    shields: { target: \"self\" | \"ally\", amount: number } | null;\r\n}\r\n\r\ninterface IJobDescription {\r\n    sort: number;\r\n    mitigations: number[];\r\n}\r\n\r\nconst RoleMitigations: { [key: number]: IMitigation } = {\r\n    1:  { ability: \"Reprisal\",                           reduction: 0.1,  shields: null },\r\n    2:  { ability: \"Rampart\",                            reduction: 0.2,  shields: null },\r\n    3:  { ability: \"Sentinel\",                           reduction: 0.3,  shields: null },\r\n    4:  { ability: \"Intervention\",                       reduction: 0.1,  shields: null },\r\n    5:  { ability: \"Intervention w/ Rampart\",            reduction: 0.2,  shields: null },\r\n    6:  { ability: \"Intervention w/ Sentinel\",           reduction: 0.25, shields: null },\r\n    7:  { ability: \"Intervention w/ Rampart & Sentinel\", reduction: 0.35, shields: null },\r\n    8:  { ability: \"Divine Veil\",                        reduction: null, shields: { target: \"self\", amount: 0.1 } },\r\n    9:  { ability: \"Passage of Arms\",                    reduction: 0.15, shields: null },\r\n    10: { ability: \"Vengence\",                           reduction: 0.3,  shields: null },\r\n    11: { ability: \"Nascent Flash\",                      reduction: 0.1,  shields: null },\r\n    12: { ability: \"Shake It Off\",                       reduction: null, shields: { target: \"ally\", amount: 0.12 } },\r\n    13: { ability: \"Shaddow Wall\",                       reduction: 0.3,  shields: null },\r\n    14: { ability: \"The Blackest Night\",                 reduction: null, shields: { target: \"ally\", amount: 0.25 } },\r\n    15: { ability: \"Dark Missionary\",                    reduction: 0.1,  shields: null },\r\n    16: { ability: \"Nebula\",                             reduction: 0.3,  shields: null },\r\n    17: { ability: \"Heart of Stone\",                     reduction: 0.15, shields: null },\r\n    18: { ability: \"Heart of Light\",                     reduction: 0.1,  shields: null },\r\n    20: { ability: \"Fey Illumination\",                   reduction: 0.05, shields: null },\r\n    21: { ability: \"Sacred Soil\",                        reduction: 0.1,  shields: null },\r\n    19: { ability: \"Collective Unconsious\",              reduction: 0.1,  shields: null },\r\n    22: { ability: \"Feint\",                              reduction: 0.1,  shields: null },\r\n    23: { ability: \"Troubadour\",                         reduction: 0.1,  shields: null },\r\n    25: { ability: \"Tactician (Gun Samba)\",              reduction: 0.1,  shields: null },\r\n    24: { ability: \"Shield Samba\",                       reduction: 0.1,  shields: null },\r\n    26: { ability: \"Addle\",                              reduction: 0.1,  shields: null },\r\n    27: { ability: \"Dark Mind\",                          reduction: 0.2,  shields: null },\r\n};\r\n\r\nconst Jobs: { [key: string]: IJobDescription } = {\r\n    \"PLD\": { sort: 1, mitigations: [1, 2, 3, 4, 5, 6, 7, 8, 9] },\r\n    \"WAR\": { sort: 2, mitigations: [1, 2, 10, 11, 12] },\r\n    \"DRK\": { sort: 3, mitigations: [1, 2, 13, 14, 15, 27] },\r\n    \"GNB\": { sort: 4, mitigations: [1, 2, 16, 17, 18] },\r\n    \"WHM\": { sort: 5, mitigations: [] },\r\n    \"SCH\": { sort: 6, mitigations: [20, 21] },\r\n    \"AST\": { sort: 7, mitigations: [19] },\r\n    \"MNK\": { sort: 8, mitigations: [22] },\r\n    \"DRG\": { sort: 9, mitigations: [22] },\r\n    \"NIN\": { sort: 10, mitigations: [22] },\r\n    \"SAM\": { sort: 11, mitigations: [22] },\r\n    \"BRD\": { sort: 12, mitigations: [23] },\r\n    \"MCH\": { sort: 13, mitigations: [25] },\r\n    \"DNC\": { sort: 14, mitigations: [24] },\r\n    \"BLM\": { sort: 15, mitigations: [26] },\r\n    \"SMN\": { sort: 16, mitigations: [26] },\r\n    \"RDM\": { sort: 17, mitigations: [26] },\r\n};\r\n\r\nconst JobRoles = {\r\n    Tank: [\r\n        \"PLD\",\r\n        \"WAR\",\r\n        \"DRK\",\r\n        \"GNB\",\r\n    ],\r\n    Healer: [\r\n        \"WHM\",\r\n        \"SCH\",\r\n        \"AST\",\r\n    ],\r\n    Melee: [\r\n        \"MNK\",\r\n        \"DRG\",\r\n        \"NIN\",\r\n        \"SAM\",\r\n    ],\r\n    Ranged: [\r\n        \"BRD\",\r\n        \"MCH\",\r\n        \"DNC\",\r\n    ],\r\n    Caster: [\r\n        \"BLM\",\r\n        \"SMN\",\r\n        \"RDM\",\r\n    ]\r\n};\r\n\r\nvar invalidDamage = false;\r\n\r\nexport default class Calculator extends React.Component<{}, ICalculatorState> {\r\n    constructor({ }) {\r\n        super({});\r\n\r\n        this.state = {\r\n            badNumber: false,\r\n            baseDamage: 0,\r\n            maxHp: 0,\r\n            adjustedDamage: 0,\r\n            mitigationMathString: \"\",\r\n            adjustedHp: 0,\r\n            activeJobs: [],\r\n            availableMitigations: {}\r\n        }\r\n    }\r\n\r\n    updateMitigations = () => {\r\n        let mitigations: number[] = [];\r\n\r\n        this.state.activeJobs.forEach(job => {\r\n            for (const id of Jobs[job].mitigations) {\r\n                if (mitigations.indexOf(id) == -1) {\r\n                    mitigations.push(id);\r\n                }\r\n            }\r\n        });\r\n\r\n        let actMitigations = this.state.availableMitigations;\r\n        for (const _key of Object.keys(this.state.availableMitigations)) {\r\n            const key = parseInt(_key);\r\n            if (mitigations.indexOf(key) === -1) {\r\n                delete actMitigations[key];\r\n            }\r\n        }\r\n\r\n        for (const key of mitigations) {\r\n            if (actMitigations[key] === undefined)\r\n                actMitigations[key] =  { active: false, def: RoleMitigations[key] };\r\n        }\r\n\r\n        console.log(\"upmit\", actMitigations);\r\n\r\n        this.setState({\r\n            availableMitigations: actMitigations\r\n        }, this.applyMitigations);\r\n    }\r\n\r\n    applyMitigations = () => {\r\n        var adjusted = this.state.baseDamage;\r\n        var mathString = \"\" + this.state.baseDamage;\r\n\r\n        Object.keys(this.state.availableMitigations).map(key => parseInt(key)).forEach(key => {\r\n            console.log(\"apmit\", key, this.state.availableMitigations[key]);\r\n            const mit = this.state.availableMitigations[key];\r\n            if (mit.active && mit.def.reduction !== null) {\r\n                adjusted = adjusted * (1 - mit.def.reduction);\r\n                mathString += \" * \" + mit.def.reduction;\r\n            }\r\n        });\r\n\r\n        this.setState({\r\n            adjustedDamage: adjusted,\r\n            mitigationMathString: mathString\r\n        });\r\n    }\r\n\r\n    onDamageUpdate = (event: React.FocusEvent<HTMLInputElement>) => {\r\n        if (!isNaN(Number(event.target.value))) {\r\n            this.setState({\r\n                badNumber: false,\r\n                baseDamage: Number(event.target.value)\r\n            }, this.applyMitigations);\r\n            console.log(\"number\", Number(event.target.value));\r\n            invalidDamage = false;\r\n        } else {\r\n            console.log(\"bad number\", event.target.value);\r\n            invalidDamage = true;\r\n        }\r\n    }\r\n\r\n    onHealthUpdate = (event: React.FocusEvent<HTMLInputElement>) => {\r\n        if (!isNaN(Number(event.target.value))) {\r\n            this.setState({\r\n                maxHp: Number(event.target.value)\r\n            });\r\n            console.log(\"number\", Number(event.target.value));\r\n        } else {\r\n            console.log(\"bad number\", event.target.value);\r\n        }\r\n    }\r\n\r\n    setActiveMitigation = (e: React.ChangeEvent<HTMLInputElement>, key: number) => {\r\n        var adjusted = this.state.availableMitigations;\r\n        adjusted[key].active = e.target.checked;\r\n        this.setState({\r\n            availableMitigations: adjusted\r\n        }, this.applyMitigations)\r\n    }\r\n\r\n    setActiveJob = (event: React.ChangeEvent<HTMLInputElement>, job: string) => {\r\n        console.log(event, job);\r\n\r\n        const checked = event.target.checked;\r\n        const jobs = this.state.activeJobs;\r\n        const idx = this.state.activeJobs.indexOf(job);\r\n        if (idx == -1 && checked) {\r\n            jobs.push(job);\r\n            this.setState({\r\n                activeJobs: jobs\r\n            }, this.updateMitigations);\r\n        } else if (idx > -1 && !checked) {\r\n            jobs.splice(idx, 1);\r\n            this.setState({\r\n                activeJobs: jobs\r\n            }, this.updateMitigations);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const jobList = Object.keys(Jobs).map(job => {\r\n            return (\r\n                <div key={job}>\r\n                    <span><input type=\"checkbox\" onChange={(e) => this.setActiveJob(e, job)}></input></span>\r\n                    <span> {job}</span>\r\n                </div>\r\n            );\r\n        });\r\n\r\n        const activeJobs = this.state.activeJobs.sort((a, b) => Jobs[a].sort - Jobs[b].sort).join(\", \");\r\n        const availableMitigations = Object.keys(this.state.availableMitigations).map(_key => {\r\n            const key = parseInt(_key);\r\n            return (\r\n                <tr>\r\n                    <td><input \r\n                        checked={this.state.availableMitigations[key].active} \r\n                        type=\"checkbox\" \r\n                        onChange={(e) => this.setActiveMitigation(e, key)}></input>\r\n                    </td>\r\n                    <td><span> {this.state.availableMitigations[key].def.ability}</span></td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-sm-3\">\r\n                    <h5>Party Makeup</h5>\r\n                    {jobList}\r\n                </div>\r\n                <div className=\"col-md\">\r\n                    <div>\r\n                        {invalidDamage ? (<div style={{ color: \"red\", fontSize: \"0.9em\" }}>Invalid Damage Number</div>) : (null)}\r\n                        <label htmlFor=\"damageInput\">Base Damage: </label>\r\n                        <br />\r\n                        <input\r\n                            id=\"damageInput\"\r\n                            style={{ color: invalidDamage ? \"red\" : \"black\" }}\r\n                            type=\"text\"\r\n                            onBlur={this.onDamageUpdate}></input>\r\n                    </div>\r\n                    <div>\r\n                        {this.state.badNumber ? (<div style={{ color: \"red\", fontSize: \"0.9em\" }}>Invalid Damage Number</div>) : null}\r\n                        <label htmlFor=\"damageInput\">Starting Health: </label>\r\n                        <br />\r\n                        <input\r\n                            id=\"health Input\"\r\n                            style={{ color: this.state.badNumber ? \"red\" : \"black\" }}\r\n                            type=\"text\"\r\n                            onBlur={this.onHealthUpdate}></input>\r\n                    </div>\r\n                    <div>\r\n                        <span>Active Jobs: {activeJobs}</span>\r\n                        <div>\r\n                            Available Mitigations:\r\n                            <table>\r\n                                <tbody>\r\n                                    {availableMitigations}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                    <br />\r\n                    <div>\r\n                        <span>Math String: {this.state.mitigationMathString}</span>\r\n                    </div>\r\n                    <br />\r\n                    <div>\r\n                        <span>Adjusted Damage: {Math.ceil(this.state.adjustedDamage)}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}